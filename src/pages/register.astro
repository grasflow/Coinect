---
import AuthLayout from "@/layouts/AuthLayout.astro";
import { RegisterForm } from "@/components/features/auth/RegisterForm";

// Bezpieczna weryfikacja użytkownika przez serwer Supabase
// Middleware już obsługuje przekierowania, ale double-check dla pewności
const {
  data: { user },
} = await Astro.locals.supabase.auth.getUser();

if (user) {
  return Astro.redirect("/time-entries");
}
---

<AuthLayout title="Coinect - Rejestracja">
  <div class="mb-8">
    <h2 class="text-2xl font-bold text-gray-900 tracking-tight">Stwórz konto</h2>
    <p class="mt-2 text-sm text-gray-600">Zacznij śledzić swój czas w kilka chwil</p>
  </div>

  <RegisterForm client:only="react" />
</AuthLayout>
